# üìã –°–≤–æ–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

### 1. **QuerySet Error –≤ crud/company.py**

- **–ü—Ä–æ–±–ª–µ–º–∞**: `TypeError: a coroutine was expected, got <tortoise.queryset.QuerySet object>`
- **–†–µ—à–µ–Ω–∏–µ**: –£–±—Ä–∞–ª `asyncio.create_task()` –¥–ª—è QuerySet –æ–ø–µ—Ä–∞—Ü–∏–π, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ —É–∂–µ —è–≤–ª—è—é—Ç—Å—è –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏
- **–§–∞–π–ª**: `crud/company.py` —Å—Ç—Ä–æ–∫–∏ 118-128

### 2. **–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ StaticFiles**

- **–ü—Ä–æ–±–ª–µ–º–∞**: `TypeError: StaticFiles.__init__() got an unexpected keyword argument 'name'`
- **–†–µ—à–µ–Ω–∏–µ**: –†–∞–Ω–µ–µ –±—ã–ª–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ `app.py`

## üåç –î–æ–±–∞–≤–ª–µ–Ω –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–π –∫–æ–º–ø–∞–Ω–∏–π

### –ú–æ–¥–µ–ª—å Company (models/user.py)

```python
# –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –¥–ª—è –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π
name_uk = fields.CharField(max_length=64, null=True)
name_en = fields.CharField(max_length=64, null=True)
name_pl = fields.CharField(max_length=64, null=True)
name_fr = fields.CharField(max_length=64, null=True)
name_de = fields.CharField(max_length=64, null=True)

# –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–ª–∞–≥–∏ –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤
slug_uk = fields.CharField(max_length=128, null=True)
slug_en = fields.CharField(max_length=128, null=True)
slug_pl = fields.CharField(max_length=128, null=True)
slug_fr = fields.CharField(max_length=128, null=True)
slug_de = fields.CharField(max_length=128, null=True)
```

### –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞ (services/translation/companys.py)

- –û–±–Ω–æ–≤–ª–µ–Ω–∞ `auto_translate_company_fields()` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞–∑–≤–∞–Ω–∏–π –∏ –æ–ø–∏—Å–∞–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —è–∑—ã–∫–∞

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–∞–≥–æ–≤ (api_old/slug_utils.py)

```python
async def generate_company_slugs(name_uk, name_en, name_pl, name_fr, name_de, company_id):
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª–∞–≥–∏ –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ "slug-id"
```

## üîó –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç URL –∫–æ–º–ø–∞–Ω–∏–π

### –ù–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç (api/company.py)

```python
@router.get('/companies/slug/{slug_with_id}')
async def get_company_by_slug(slug_with_id: str):
    # –ü–∞—Ä—Å–∏—Ç —Ñ–æ—Ä–º–∞—Ç "slug-id" –∏ –Ω–∞—Ö–æ–¥–∏—Ç –∫–æ–º–ø–∞–Ω–∏—é
```

### –ü–∞—Ä—Å–∏–Ω–≥ slug-id

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç ID –∏–∑ –∫–æ–Ω—Ü–∞ —Å—Ç—Ä–æ–∫–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–ª–∞–≥–∞ –Ω–∞ –≤—Å–µ—Ö —è–∑—ã–∫–∞—Ö
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404 –µ—Å–ª–∏ —Å–ª–∞–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω

## üîî –î–æ–±–∞–≤–ª–µ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —É—Å–ø–µ—à–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏

### API –æ—Ç–≤–µ—Ç—ã —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏

```python
# –û–±—ã—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
{
    "success": True,
    "message": "–ö–æ–º–ø–∞–Ω–∏—è —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞",
    "company_id": 123,
    "company": {...}
}

# –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
{
    "success": True,
    "message": "–ö–æ–º–ø–∞–Ω–∏—è —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ (–ø–µ—Ä–µ–≤–æ–¥—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ñ–æ–Ω–µ)",
    "company_id": 123,
    "company": {...}
}
```

## üóÑÔ∏è –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ú–∏–≥—Ä–∞—Ü–∏—è (db/migrations/add_company_multilang_fields.py)

```sql
ALTER TABLE company
ADD COLUMN name_uk VARCHAR(64),
ADD COLUMN name_en VARCHAR(64),
-- ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —è–∑—ã–∫–∏

ALTER TABLE company
ADD COLUMN slug_uk VARCHAR(128),
-- ... —Å–ª–∞–≥–∏ –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤

ALTER TABLE company
ADD COLUMN auto_translated_fields JSON,
ADD COLUMN created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
ADD COLUMN updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ö–µ–º—ã (schemas/company.py)

- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `name_uk`, `name_en`, `name_pl`, `name_fr`, `name_de`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ CompanyCreateSchema –∏ CompanyUpdateSchema

## üöÄ –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 1. –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–π

```
POST /api/companies-fast
```

- –°–æ–∑–¥–∞–µ—Ç –∫–æ–º–ø–∞–Ω–∏—é –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
- –ü–µ—Ä–µ–≤–æ–¥—ã –∏ —Å–ª–∞–≥–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ñ–æ–Ω–µ
- –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ —Å–ª–∞–≥—É

```
GET /api/companies/slug/{slug-id}
```

- –§–æ—Ä–º–∞—Ç: `company-name-123`
- –†–∞–±–æ—Ç–∞–µ—Ç —Å–æ —Å–ª–∞–≥–∞–º–∏ –Ω–∞ –≤—Å–µ—Ö —è–∑—ã–∫–∞—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ ID

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

- –í—Å–µ –ø–µ—Ä–µ–≤–æ–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `asyncio.gather()` –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –°–µ–º–∞—Ñ–æ—Ä –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- Graceful fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø–µ—Ä–µ–≤–æ–¥–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á–∞—Ö
- HTTP 404 –¥–ª—è –Ω–µ–≤–µ—Ä–Ω—ã—Ö —Å–ª–∞–≥–æ–≤

### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –£–±—Ä–∞–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

## üìù –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. **models/user.py** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã–µ –ø–æ–ª—è Company
2. **services/translation/companys.py** - –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–π
3. **services/company.py** - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è
4. **crud/company.py** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã QuerySet –æ—à–∏–±–∫–∏, –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ –ø–æ–∏—Å–∫–∞
5. **api/company.py** - –Ω–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è slug-id
6. **schemas/company.py** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏
7. **api_old/slug_utils.py** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–∞–≥–æ–≤ –∫–æ–º–ø–∞–Ω–∏–π
8. **db/migrations/add_company_multilang_fields.py** - –º–∏–≥—Ä–∞—Ü–∏—è –ë–î

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

–°–µ—Ä–≤–µ—Ä —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫. –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î: `python db/migrations/add_company_multilang_fields.py`
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–π —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É URL —Ñ–æ—Ä–º–∞—Ç–∞ slug-id
4. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–ª—è –Ω–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

---

**–°—Ç–∞—Ç—É—Å**: üéØ **–í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã** ‚úÖ
